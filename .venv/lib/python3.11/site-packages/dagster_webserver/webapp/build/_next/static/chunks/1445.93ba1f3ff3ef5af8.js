"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1445],{48502:function(e,t,n){n.d(t,{z:function(){return i}});var r=n(20958),s=n(78491);let i=(0,r.Ps)`
  fragment AutomationAssetSelectionFragment on AssetSelection {
    assetSelectionString
    assetsOrError {
      ... on AssetConnection {
        nodes {
          id
          ...AssetSelectionNodeFragment
        }
      }
      ... on PythonError {
        ...PythonErrorFragment
      }
    }
  }

  fragment AssetSelectionNodeFragment on Asset {
    id
    key {
      path
    }
    definition {
      id
      automationCondition {
        __typename
      }
    }
  }

  ${s.B}
`},24427:function(e,t,n){n.d(t,{p:function(){return R}});var r=n(52322),s=n(14934),i=n(43212),o=n(39013),a=n(92506),l=n(38491),d=n(89891),c=n(36853),u=n(83373);let h=e=>{let{isOpen:t,onToggle:n}=e;return(0,r.jsx)(u.k,{onClick:e=>{n(e)},style:{cursor:"pointer",width:18},children:(0,r.jsx)(c.JO,{name:"arrow_drop_down",style:{transform:t?"rotate(0deg)":"rotate(-90deg)"}})})};var x=n(35292),p=n(53664),m=n(2784),g=n(47933),j=n(8068),f=n(99590),y=n(71406),S=n(44900),v=n(75442),k=n(88257),w=n(33847),C=n(81732),b=n(70812),E=n(92199);let R=e=>{let{assetSelection:t,automationType:n,targets:a,repoAddress:l}=e,d=(0,E.Ux)(l);if(!a&&!t)return(0,r.jsx)("span",{});let c=a?.filter(e=>!S.pv(e.pipelineName));return t?(0,r.jsx)(I,{assetSelection:t,automationType:n}):c?.length?(0,r.jsx)(s.x,{flex:{direction:"row",gap:4},children:c.map(e=>e.pipelineName?(0,r.jsx)(i.V,{icon:"job",tooltipText:e.pipelineName,children:(0,r.jsx)(w.h,{pipelineName:e.pipelineName,pipelineHrefContext:l,isJob:!!(d&&(0,E.E8)(d,e.pipelineName))},e.pipelineName)},e.pipelineName):null)}):(0,r.jsx)(i.V,{children:(0,r.jsx)("div",{style:{color:o.$()},children:"None"})})},I=e=>{let{assetSelection:t,automationType:n}=e,[c,u]=(0,m.useState)(!1),h="PythonError"===t.assetsOrError.__typename?t.assetsOrError:null,x=(0,m.useMemo)(()=>"PythonError"===t.assetsOrError.__typename?[]:t.assetsOrError.nodes.slice().sort((e,t)=>y.Bl.compare((0,S.ll)(e.key),(0,S.ll)(t.key))),[t.assetsOrError]),p=(0,m.useMemo)(()=>x.filter(e=>!!e.definition?.automationCondition),[x]),w=(0,m.useMemo)(()=>x.filter(e=>!e.definition?.automationCondition),[x]),C=t.assetSelectionString||"",b="all materializable assets"===C,E=x[0];return E&&1===x.length?(0,r.jsx)(i.V,{icon:"asset",children:(0,r.jsx)(g.rU,{to:(0,v.p)(E.key),children:C})}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(a.Vq,{isOpen:c,title:"Targeted assets",onClose:()=>u(!1),style:{width:"750px",maxWidth:"80vw",minWidth:"500px"},canOutsideClickClose:!0,canEscapeKeyClose:!0,children:[(0,r.jsx)(s.x,{flex:{direction:"column"},style:{height:"50vh",maxHeight:"1000px",minHeight:"400px"},children:n===k.dEY.AUTO_MATERIALIZE||n===k.dEY.AUTOMATION?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(T,{title:"Assets with a materialization policy",titleBorder:"bottom",assets:p}),(0,r.jsx)(T,{title:"Assets without a materialization policy",titleBorder:"top-and-bottom",assets:w})]}):(0,r.jsx)(T,{assets:x})}),(0,r.jsx)(a.cN,{topBorder:!0,children:(0,r.jsx)(l.zx,{intent:"primary",onClick:()=>{u(!1)},children:"Close"})})]}),(0,r.jsx)(i.V,{icon:1===x.length?"asset":"asset_group",intent:h?"danger":"none",children:(0,r.jsx)(d.Z,{onClick:()=>{h?(0,j._K)({title:"Python error",body:(0,r.jsx)(f.T9,{error:h})}):u(!0)},color:h?o.Yn():o.Es(),children:h?"Error loading asset selection":b?"All materializable assets":C})})]})},T=e=>{let{assets:t,title:n,titleBorder:i="top-and-bottom"}=e,[a,l]=(0,m.useState)(!0);return(0,r.jsxs)(r.Fragment,{children:[n?(0,r.jsx)(s.x,{border:i,padding:{right:24,vertical:12},children:(0,r.jsxs)(s.x,{flex:{direction:"row",gap:4},style:{cursor:"pointer"},onClick:()=>{l(!a)},children:[(0,r.jsx)(h,{onToggle:()=>{},isOpen:a}),(0,r.jsxs)(x.Tj,{children:[n," (",b.V.format(t.length),")"]})]})}):null,a?t.length?(0,r.jsx)("div",{style:{height:"100%",overflowY:"hidden"},children:(0,r.jsx)(C.Y,{padding:0,items:t,renderItem:e=>(0,r.jsx)(A,{asset:e},e.id),itemBorders:!0})}):(0,r.jsx)(s.x,{padding:{horizontal:24,vertical:12},children:(0,r.jsx)(x.YS,{color:o.$(),children:"0 assets"})}):null]})},A=e=>{let{asset:t}=e;return(0,r.jsx)(s.x,{flex:{alignItems:"center",gap:4},style:{cursor:"pointer"},padding:{horizontal:24},children:(0,r.jsx)(g.rU,{to:(0,v.p)(t.key),target:"_blank",children:(0,r.jsx)(s.x,{style:{overflow:"hidden"},children:(0,r.jsx)(p.g,{text:(0,S.ll)(t.key)})})})})}},59502:function(e,t,n){n.d(t,{p:function(){return S}});var r=n(52322),s=n(39013),i=n(60129),o=n(35292),a=n(35002),l=n(40191),d=n(28879),c=n.n(d),u=n(77491),h=n.n(u),x=n(2784),p=n(2728),m=n(22791),g=n(57758),j=n(88257);c().extend(h());let f={[j.izS.SUCCESS]:s.fA(),[j.izS.FAILURE]:s.FY(),[j.izS.STARTED]:s.v4(),[j.izS.SKIPPED]:s.A8()},y={[j.izS.SUCCESS]:s.Lv(),[j.izS.FAILURE]:s.MP(),[j.izS.STARTED]:s.Jq(),[j.izS.SKIPPED]:s.$l()},S=e=>{let{ticks:t,tickResultType:n,onHoverTick:s,onSelectTick:l,exactRange:d,timeRange:c=3e5,tickGrid:u=6e4,timeAfter:h=6e4}=e,[p,j]=(0,x.useState)(Date.now()),[f,y]=(0,x.useState)(!1);(0,x.useEffect)(()=>{if(!f&&!d){let e=setInterval(()=>{j(Date.now())},100);return()=>clearInterval(e)}return()=>{}},[d,f]);let S=d?.[1]?1e3*d[1]:p+h,T=d?.[0]?1e3*d[0]:p-c,A=T<p&&p<S,$=S-T,{viewport:_,containerProps:N}=(0,i.S)(),O=(0,x.useMemo)(()=>t.filter(e=>!e.endTimestamp||1e3*e.endTimestamp>T).reverse(),[t,T]),P=(0,x.useMemo)(()=>O.map((e,t)=>{var n,r;let s=(n=1e3*e.timestamp,_.width*(n-T)/$),i=(r=(0,g.g6)(e,O.length-t-1)?e.timestamp:e.endTimestamp?1e3*e.endTimestamp:p,_.width*(r-T)/$);return{...e,width:Math.max(i-s,8),startX:s}}),[T,p,O,$,_.width]),z=Math.max((S-T)/25,u)/5,q=Math.ceil(T/z)*z,D=Math.ceil((S-q)/z),F=Math.ceil(D/5),M=(0,x.useMemo)(()=>{let e=[];for(let t=0;t<D;t++){let n=q+t*z;e.push({time:n,x:_.width*(n-T)/$,showLabel:t%F==0})}return e},[D,q,z,_.width,T,$,F]);return(0,r.jsx)("div",{style:{marginRight:"8px"},children:(0,r.jsxs)("div",{...N,children:[(0,r.jsxs)(k,{children:[M.map(e=>(0,r.jsxs)(b,{style:{transform:`translateX(${e.x}px)`},children:[(0,r.jsx)(E,{}),e.showLabel?(0,r.jsx)(R,{children:(0,r.jsx)(o.YS,{children:(0,r.jsx)(m.E,{timestamp:{ms:e.time},timeFormat:{showSeconds:!0}})})}):null]},e.time)),P.map(e=>{let t=("materializations"!==n&&"runIds"in e?e.runIds?.length:e.requestedAssetMaterializationCount)??0;return(0,r.jsx)(C,{style:{transform:`translateX(${e.startX}px)`,width:`${e.width}px`},status:e.status,onMouseEnter:()=>{s(e),y(!0)},onMouseLeave:()=>{s(),y(!1)},onClick:()=>{l(e)},children:(0,r.jsx)(a.u,{content:(0,r.jsx)(v,{tick:e,tickResultType:n}),children:(0,r.jsx)("div",{style:{width:e.width+"px",height:"80px"},children:t>0?t:null})})},e.id)}),A?(0,r.jsx)(I,{style:{transform:`translateX(${_.width*(p-T)/$}px)`}}):null]}),(0,r.jsx)(w,{})]})})},v=(0,x.memo)(e=>{let{tick:t,tickResultType:n}=e,i=(0,x.useMemo)(()=>t.status===j.izS.FAILURE?"Evaluation failed":t.status===j.izS.STARTED?"Evaluating…":"materializations"!==n&&"runs"in t?`${t.runs?.length||0} run${(0,l.I)(t.runs?.length,"","s")} requested`:`${t.requestedAssetMaterializationCount} materialization${(0,l.I)(t.requestedAssetMaterializationCount,"","s")} requested`,[t,n]),a=c()(1e3*t.timestamp),d=c()(t.endTimestamp?1e3*t.endTimestamp:Date.now()),u=a.to(d,!0);return(0,r.jsxs)("div",{children:[(0,r.jsx)(o.YS,{as:"div",children:(0,r.jsx)(m.E,{timestamp:{unix:t.timestamp},timeFormat:{showSeconds:!0}})}),(0,r.jsxs)(o.YS,{as:"div",children:[i," (",u,")"]}),t.status===j.izS.STARTED?null:(0,r.jsx)(o.YS,{color:s.$(),children:"Click for details"})]})}),k=p.ZP.div.withConfig({componentId:"sc-93f8c965-0"})(["position:relative;height:100px;padding:10px 2px;border-bottom:1px solid ",";"],s.wL()),w=p.ZP.div.withConfig({componentId:"sc-93f8c965-1"})(["height:24px;"]),C=p.ZP.div.withConfig({componentId:"sc-93f8c965-2"})(["cursor:pointer;position:absolute;top:10px;height:80px;will-change:transform,width;border-radius:2px;div{place-content:center;display:grid;}color:",";",""],s.v8(),e=>{let{status:t}=e;return`
    background: ${f[t]};
    &:hover {
      background: ${y[t]};
    }
  `}),b=p.ZP.div.withConfig({componentId:"sc-93f8c965-3"})(["position:absolute;top:0;height:124px;will-change:transform;"]),E=p.ZP.div.withConfig({componentId:"sc-93f8c965-4"})(["position:absolute;top:0;height:108px;width:1px;background:",";"],s.wL()),R=p.ZP.div.withConfig({componentId:"sc-93f8c965-5"})(["height:16px;position:absolute;bottom:0;width:100px;margin-left:-24px;"]),I=p.ZP.div.withConfig({componentId:"sc-93f8c965-6"})(["position:absolute;top:0;height:126px;width:2px;background:",";&:after{content:'Now';position:absolute;left:0;background:",";color:",";bottom:0;font-size:12px;padding:3px 4px;}"],s.Bj(),s.Bj(),s.KH())},9790:function(e,t,n){n.d(t,{C:function(){return V},H:function(){return B}});var r,s,i=n(52322);n(26529);var o=n(14934),a=n(79106),l=n(37483),d=n(80122),c=n(46100),u=n(60603),h=n(38491),x=n(36853),p=n(35292),m=n(74188),g=n(53664),j=n(89891),f=n(40191),y=n(39013),S=n(1747),v=n(65511),k=n(42418),w=n(2784),C=n(2728),b=n(77837),E=n(581),R=n(59502),I=n(44030),T=n(57758),A=n(20958),$=n(50309),_=n(78491),N=n(99590),O=n(16336),P=n(85227),z=n(88257),q=n(4378),D=n(2278),F=n(15332),M=n(86269),L=n(57397),U=n(58905),K=n(20718);v.kL.register(k.ZP),(r=s||(s={})).ALL="all",r.FAILED="failed",r.SUCCESS="success";let Y={all:[z.izS.SUCCESS,z.izS.FAILURE,z.izS.STARTED,z.izS.SKIPPED],failed:[z.izS.FAILURE],success:[z.izS.SUCCESS]},B=e=>{let{name:t,repoAddress:n,tabs:r,tickResultType:s,setTimerange:c,setParentStatuses:u}=e,[h,x]=(0,q.q)({queryKey:"status",defaults:{status:"all"}}),[p,m]=(0,w.useState)(null),[g,j]=(0,w.useState)(null),f={...(0,K.$)(n),name:t},y=w.useMemo(()=>Y[h]||Y.all,[h]),{queryResult:S,paginationProps:v}=(0,F.l)({nextCursorForResult:e=>{if("InstigationState"===e.instigationStateOrError.__typename)return e.instigationStateOrError.ticks[25-1]?.id},getResultArray:e=>e&&"InstigationState"===e.instigationStateOrError.__typename?e.instigationStateOrError.ticks:[],variables:{instigationSelector:f,statuses:y},query:J,pageSize:25});(0,O.C4)(S,O.dT);let k=S?.data?.instigationStateOrError,C=w.useMemo(()=>k?.__typename==="InstigationState"?k.ticks:[],[k]);w.useEffect(()=>{if(v.hasPrevCursor){if(C&&C.length){let e=C[C.length-1]?.timestamp,t=C[0]?.endTimestamp;e&&t&&c?.([e,t])}}else c?.(void 0)},[v.hasPrevCursor,C,c]),w.useEffect(()=>{v.hasPrevCursor?u?.(Array.from(y)):u?.(void 0)},[v.hasPrevCursor,u,y]),w.useEffect(()=>{!v.hasPrevCursor||C.length||S.loading||v.reset()},[C,S.loading,v.hasPrevCursor]);let{data:b}=S;if(!b)return(0,i.jsx)(o.x,{padding:{vertical:48},children:(0,i.jsx)(a.$,{purpose:"page"})});if("PythonError"===b.instigationStateOrError.__typename)return(0,i.jsx)(N.T9,{error:b.instigationStateOrError});if("InstigationStateNotFoundError"===b.instigationStateOrError.__typename)return(0,i.jsx)(o.x,{padding:{vertical:32},flex:{justifyContent:"center"},children:(0,i.jsx)(l.t,{icon:"no-results",title:"No ticks to display"})});let{instigationType:E}=b.instigationStateOrError;return C.length||"all"!==h?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o.x,{padding:{vertical:12,horizontal:24},children:(0,i.jsxs)(o.x,{flex:{direction:"row",justifyContent:"space-between",alignItems:"center"},children:[r,(0,i.jsx)(o.x,{flex:{direction:"row",gap:16},children:(0,i.jsx)(Z,{status:h,onChange:x})})]})}),C.length?(0,i.jsxs)(W,{children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{style:{width:120},children:"Timestamp"}),(0,i.jsx)("th",{style:{width:90},children:"Status"}),(0,i.jsx)("th",{style:{width:90},children:"Duration"}),E===z._5b.SENSOR?(0,i.jsx)("th",{style:{width:120},children:"Cursor"}):null,(0,i.jsx)("th",{style:{width:180},children:"Result"}),(0,i.jsx)("th",{style:{width:80},children:"Logs"})]})}),(0,i.jsx)("tbody",{children:C.map((e,t)=>(0,i.jsx)(H,{tick:e,tickResultType:s,instigationSelector:f,index:t,onShowDetails:m,onShowLogs:j},e.id))})]}):(0,i.jsx)(o.x,{padding:{vertical:32},flex:{justifyContent:"center"},children:(0,i.jsx)(l.t,{icon:"no-results",title:"No ticks to display"})}),C.length>0?(0,i.jsx)("div",{style:{marginTop:"16px"},children:(0,i.jsx)(d.pI,{...v})}):null,(0,i.jsx)(I.X,{isOpen:!!p,tickId:p?.tickId,tickResultType:s,instigationSelector:f,onClose:()=>m(null)}),(0,i.jsx)(L.l,{isOpen:!!g,tickId:g?.tickId??null,timestamp:g?.timestamp,instigationSelector:f,onClose:()=>j(null)})]}):null},Z=e=>{let{status:t,onChange:n}=e,r=[{key:"all",label:"All ticks"},{key:"success",label:"Requested"},{key:"failed",label:"Failed"}],s=r.find(e=>{let{key:n}=e;return n===t});return(0,i.jsx)(c.P,{popoverProps:{position:"bottom-right"},filterable:!1,activeItem:s,items:r,itemRenderer:(e,t)=>(0,i.jsx)(u.sN,{active:t.modifiers.active,onClick:t.handleClick,text:e.label,style:{width:"300px"}},e.key),itemListRenderer:e=>{let{renderItem:t,filteredItems:n}=e,r=n.map(t).filter(Boolean);return(0,i.jsx)(u.v2,{children:r})},onItemSelect:e=>n(e.key),children:(0,i.jsx)(h.zx,{rightIcon:(0,i.jsx)(x.JO,{name:"arrow_drop_down"}),style:{minWidth:"200px",display:"flex",justifyContent:"space-between"},children:s?.label})})},V=e=>{let{name:t,repoAddress:n,tickResultType:r,onHighlightRunIds:s,beforeTimestamp:l,afterTimestamp:d,statuses:c}=e,[u,h]=(0,q.q)({encode:e=>({tickId:e}),decode:e=>e.tickId??void 0}),[x,m]=w.useState(!1),g={...(0,K.$)(n),name:t},j=(0,A.aM)(J,{variables:{instigationSelector:g,beforeTimestamp:l,afterTimestamp:d,statuses:c,limit:l?void 0:15},notifyOnNetworkStatusChange:!0});(0,O.C4)(j,1e3,!(x||l&&d));let{data:f,error:y}=j;if(!f||y)return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o.x,{padding:{top:16,horizontal:24},border:"bottom",children:(0,i.jsx)(p.pm,{children:"Recent ticks"})}),(0,i.jsx)(o.x,{padding:{vertical:64},children:(0,i.jsx)(a.$,{purpose:"section"})})]});if("PythonError"===f.instigationStateOrError.__typename)return(0,i.jsx)(N.T9,{error:f.instigationStateOrError});if("InstigationStateNotFoundError"===f.instigationStateOrError.__typename)return null;let{ticks:S=[]}=f.instigationStateOrError,v=e=>{h(e?e.tickId:void 0)};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(I.X,{isOpen:!!u,tickId:u,tickResultType:r,instigationSelector:g,onClose:()=>v(void 0)}),(0,i.jsx)(o.x,{padding:{vertical:16,horizontal:24},children:(0,i.jsx)(p.pm,{children:"Recent ticks"})}),(0,i.jsx)(o.x,{border:"top",children:(0,i.jsx)(R.p,{ticks:S,tickResultType:r,onHoverTick:e=>{e||m(!1),e?.runIds&&(s&&s(e.runIds),m(!0))},onSelectTick:v,exactRange:l&&d?[d,l]:void 0})})]})};function H(e){let{tick:t,tickResultType:n,index:r,onShowDetails:s,onShowLogs:a}=e,l=(0,P.m)(),[d,c]=w.useMemo(()=>{let e=t.dynamicPartitionsRequestResults;return[(0,T.sw)(e,z.Dq2.ADD_PARTITIONS),(0,T.sw)(e,z.Dq2.DELETE_PARTITIONS)]},[t?.dynamicPartitionsRequestResults]),u=(0,T.g6)(t,r);return(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)(M.v,{timestamp:t.timestamp,timeFormat:{showTimezone:!1,showSeconds:!0}})}),(0,i.jsx)("td",{children:(0,i.jsx)(U.a,{tick:t,tickResultType:n,isStuckStarted:u})}),(0,i.jsx)("td",{children:u?"- ":(0,i.jsx)(D.Q,{startUnix:t.timestamp,endUnix:t.endTimestamp||Date.now()/1e3})}),t.instigationType===z._5b.SENSOR?(0,i.jsx)("td",{children:t.cursor?(0,i.jsxs)(o.x,{flex:{direction:"row",alignItems:"center",gap:8},children:[(0,i.jsx)("div",{style:{fontFamily:m.b.monospace,fontSize:"14px",maxWidth:"400px",overflow:"hidden"},children:(0,i.jsx)(g.g,{text:t.cursor||""})}),(0,i.jsx)(Q,{onClick:async()=>{l(t.cursor||""),await (0,$.B7)({message:(0,i.jsx)("div",{children:"Copied value"}),intent:"success"})},children:(0,i.jsx)(x.JO,{name:"assignment"})})]}):(0,i.jsx)(i.Fragment,{children:"—"})}):null,(0,i.jsx)("td",{children:(0,i.jsxs)(o.x,{flex:{direction:"column",gap:6},children:["runs"===n?(0,i.jsxs)(o.x,{flex:{alignItems:"center",gap:8},children:[(0,i.jsx)(j.Z,{onClick:()=>s(t),children:1===t.runIds.length?"1 run requested":`${t.runIds.length} runs requested`}),1===t.runs.length?t.runs.map(e=>(0,i.jsx)(w.Fragment,{children:(0,i.jsx)(E.RX,{run:e})},e.id)):null]}):(0,i.jsx)(o.x,{flex:{alignItems:"center",gap:8},children:(0,i.jsx)(j.Z,{onClick:()=>s(t),children:1===t.requestedAssetMaterializationCount?"1 materialization requested":`${t.requestedAssetMaterializationCount} materializations requested`})}),d||c?(0,i.jsxs)(p.YS,{children:["(",d?(0,i.jsxs)("span",{children:[d," partition",(0,f.I)(d,"","s")," created",c?",":""]}):null,c?(0,i.jsxs)("span",{children:[c," partition",(0,f.I)(c,"","s")," deleted,"]}):null,")"]}):null]})}),(0,i.jsx)("td",{children:(0,i.jsx)(h.zx,{onClick:()=>a(t),children:"View logs"})})]})}let J=(0,A.Ps)`
  query TickHistoryQuery(
    $instigationSelector: InstigationSelector!
    $dayRange: Int
    $limit: Int
    $cursor: String
    $statuses: [InstigationTickStatus!]
    $beforeTimestamp: Float
    $afterTimestamp: Float
  ) {
    instigationStateOrError(instigationSelector: $instigationSelector) {
      ... on InstigationState {
        id
        instigationType
        ticks(
          dayRange: $dayRange
          limit: $limit
          cursor: $cursor
          statuses: $statuses
          beforeTimestamp: $beforeTimestamp
          afterTimestamp: $afterTimestamp
        ) {
          id
          ...HistoryTick
        }
      }
      ...PythonErrorFragment
    }
  }

  ${E.S9}
  ${_.B}
  ${b.dY}
  ${E.vw}
`,Q=C.ZP.button.withConfig({componentId:"sc-152f2adb-0"})(["background:transparent;border:0;cursor:pointer;padding:8px;margin:-6px;outline:none;","{background-color:",";transition:background-color 100ms;}&:hover ","{background-color:",";}&:focus ","{background-color:",";}"],x.a1,y.md(),x.a1,y.$l(),x.a1,y.Es()),W=(0,C.ZP)(S.i).withConfig({componentId:"sc-152f2adb-1"})(["th,td{vertical-align:middle !important;}"])},57758:function(e,t,n){n.d(t,{g6:function(){return s},sw:function(){return i}});var r=n(88257);function s(e,t){return!e.endTimestamp&&(0!==t&&e.status===r.izS.STARTED||1e3*e.timestamp<Date.now()-259200)}function i(e,t){return e.reduce((e,n)=>n.type===t?e+(n.partitionKeys?.length||0):e,0)}},57234:function(e,t,n){n.d(t,{W:function(){return d}});var r=n(2784),s=n(7267),i=n(84234),o=n(20958),a=n(95906),l=n(33182);function d(){let[e]=(0,o.Db)(l.Dl),t=(0,a.Ci)(),n=(0,s.k6)();return(0,r.useCallback)(async(r,s,o)=>{try{let i=Array.isArray(r.executionParamsList)?r.executionParamsList:[r.executionParamsList],d=i.map(e=>e.selector.jobName||e.selector.pipelineName);if(1!==i.length||i[0]?.selector?.jobName||(d=[o],i[0].selector.jobName=o),d.length!==i.length||d.includes(void 0)||d.includes(null))throw Error("Error: Invalid job names. Each RunRequest must specify a job name to launch all runs");let c={jobNames:d.filter(e=>void 0!==e),opSelection:void 0},u=(await e({variables:r})).data?.launchMultipleRuns;return u&&((0,l.nh)(u,n,{behavior:s}),t(a.Iq.LAUNCH_MULTIPLE_RUNS,c)),u}catch(e){console.error("error",e),(0,i.t)(e)}},[n,e,t])}},6750:function(e,t,n){n.d(t,{d:function(){return o}});var r=n(20958),s=n(78491),i=n(48502);let o=(0,r.Ps)`
  query ScheduleAssetSelectionQuery($scheduleSelector: ScheduleSelector!) {
    scheduleOrError(scheduleSelector: $scheduleSelector) {
      ... on Schedule {
        id
        assetSelection {
          ...AutomationAssetSelectionFragment
        }
      }
      ...PythonErrorFragment
    }
  }

  ${i.z}
  ${s.B}
`},50494:function(e,t,n){n.d(t,{e:function(){return eo}});var r=n(52322),s=n(74580),i=n(35292),o=n(43212),a=n(14934),l=n(90441),d=n(74188),c=n(35002),u=n(38491),h=n(36853),x=n(2784),p=n(47933),m=n(2728),g=n(19679),j=n(84842);let f=e=>{let{metadata:t}=e;return t?.assetKeys?.length?(0,r.jsx)(a.x,{flex:{direction:"column",gap:2},children:t.assetKeys.map(e=>(0,r.jsx)(j.R,{path:e.path,icon:"asset"},e.path.join("/")))}):(0,r.jsx)("span",{})};var y=n(89398),S=n(20958),v=n(36803),k=n(20718);let w=e=>{let{repoAddress:t,sensor:n}=e,{permissions:{canStartSensor:s,canStopSensor:i}}=(0,v.xz)(t.location),{name:o}=n,a={...(0,k.$)(t),sensorName:o},[l,{loading:d}]=(0,S.Db)(y.Lq,{onCompleted:y.oI}),h=s&&i,x=h?`In code, a default status for "${o}" has been set to "${n.defaultStatus}". Click here to reset the sensor status to track the status set in code.`:v.Qr;return(0,r.jsx)(c.u,{content:(0,r.jsx)("div",{style:{maxWidth:"500px",wordBreak:"break-word"},children:x}),display:"flex",children:(0,r.jsx)(u.zx,{disabled:d||!h,onClick:()=>{l({variables:{sensorSelector:a}})},children:"Reset sensor status"})})};var C=n(60918),b=n(92506),E=n(34147),R=n(89891),I=n(39013),T=n(79106),A=n(37483),$=n(74159),_=n(49035),N=n(1747),O=n(88257);function P(e){let{includeTitle:t=!0,requests:n}=e,s=(0,x.useMemo)(()=>{if(!n.length)return[];let e=[];return n.forEach(t=>{let{partitionKeys:n,partitionsDefName:r,type:s}=t;n?.forEach(t=>{e.push({key:t,def:r,type:s})})}),e},[n]);return s.length?(0,r.jsxs)(a.x,{flex:{direction:"column",gap:12,grow:1},children:[t?(0,r.jsxs)(a.x,{flex:{direction:"row",alignItems:"center",gap:8},children:[(0,r.jsx)(h.JO,{name:"partition"}),(0,r.jsx)(i.pm,{children:"Dynamic Partition Requests"})]}):null,(0,r.jsxs)(N.i,{style:{borderRight:`1px solid ${I.wL()}`},children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"Partition"}),(0,r.jsx)("th",{children:"Partition definition"}),(0,r.jsx)("th",{children:"Requested change"})]})}),(0,r.jsx)("tbody",{children:s.map((e,t)=>{let{key:n,def:s,type:i}=e;return(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:n}),(0,r.jsx)("td",{children:s}),(0,r.jsx)("td",{children:i===O.Dq2.ADD_PARTITIONS?(0,r.jsx)(o.V,{intent:"success",children:(0,r.jsx)("span",{children:"Add Partition"})}):(0,r.jsx)(o.V,{intent:"danger",children:(0,r.jsx)("span",{children:"Delete Partition"})})})]},t)})})]})]}):null}var z=n(76562),q=n(8068),D=n(50309),F=n(78491),M=n(99590),L=n(71406),U=n(69737),K=n(57234),Y=n(77851),B=n(58252);let Z=e=>{let{isOpen:t,onClose:n,name:s}=e;return(0,r.jsx)(b.Vq,{isOpen:t,onClose:n,style:{width:"70vw",display:"flex"},icon:"preview_tick",title:`Preview tick result for ${s}`,children:(0,r.jsx)(V,{...e})})},V=e=>{let{repoAddress:t,name:n,currentCursor:s,onClose:l,jobName:d}=e,p=(0,U.Ke)(),[m]=(0,S.Db)(H),[j]=(0,S.Db)(g.T),[f,y]=(0,x.useState)(s),[v,k]=(0,x.useState)(!1),[w,C]=(0,x.useState)(!1),[N,O]=(0,x.useState)(null),[z,F]=(0,x.useState)(null),Z=(0,x.useMemo)(()=>({sensorName:n,repositoryLocationName:t.location,repositoryName:t.name}),[t,n]),V=(0,x.useMemo)(()=>z&&Z?(0,B.Q)(z,Z):[],[Z,z]),X=(0,x.useCallback)(async()=>{k(!0);let e=await m({variables:{selectorData:Z,cursor:f}}),t=e.data?.sensorDryRun;t?t?.__typename==="DryRunInstigationTick"?t.evaluationResult?.error?O(t.evaluationResult.error):F(t):t?.__typename==="SensorNotFoundError"?(0,q._K)({title:"Sensor not found",body:`Could not find a sensor named: ${n}`}):O(t):(0,L.UT)("sensorDryRun Mutation returned no data??"),k(!1)},[m,Z,f,n]),G=(0,x.useCallback)(async()=>{let e=z?.evaluationResult?.cursor;if(!e)return;let{data:t}=await j({variables:{sensorSelector:Z,cursor:e}});if(t?.setSensorCursor.__typename==="Sensor")await (0,D.B7)({message:"Cursor value updated",intent:"success"});else if(t?.setSensorCursor){let e=t.setSensorCursor;await (0,D.B7)({intent:"danger",message:(0,r.jsxs)(E.Z,{direction:"row",spacing:8,children:[(0,r.jsx)("div",{children:"Could not set cursor value."}),(0,r.jsx)(R.Z,{color:I.KH(),underline:"always",onClick:()=>{(0,q._K)({title:"Python Error",body:"PythonError"===e.__typename?(0,r.jsx)(M.T9,{error:e}):"Sensor not found"})},children:"View error"})]})})}},[z?.evaluationResult?.cursor,Z,j]),ee=(0,K.W)(),et=(0,x.useMemo)(()=>null!=V&&V.length>0,[V]),en=(0,x.useCallback)(async()=>{if(et){p("launch-all-sensor"),C(!0);try{V&&(await ee({executionParamsList:V},"toast",d),G())}catch(e){console.error(e)}C(!1),l()}},[et,V,d,ee,l,G,p]),er=(0,x.useMemo)(()=>w?null:z||N?(0,r.jsx)(u.zx,{icon:(0,r.jsx)(h.JO,{name:"settings_backup_restore"}),"data-testid":(0,Y.N)("try-again"),onClick:()=>{F(null),O(null)},children:"Try again"}):null,[w,z,N]),es=(0,x.useMemo)(()=>{if(w)return(0,r.jsx)(a.x,{flex:{direction:"row",gap:8}});if(z||N){let e=z?.evaluationResult?.runRequests,t=e?.length||0,n=!N&&0===t;return N?(0,r.jsx)(a.x,{flex:{direction:"row",gap:8},children:(0,r.jsx)(u.zx,{onClick:l,children:"Close"})}):n?(0,r.jsxs)(a.x,{flex:{direction:"row",gap:8},children:[(0,r.jsx)(u.zx,{onClick:l,children:"Close"}),(0,r.jsx)(c.u,{content:"Commits tick result",placement:"top-end",children:(0,r.jsx)(u.zx,{icon:(0,r.jsx)(h.JO,{name:"check_filled"}),intent:"primary",onClick:G,"data-testid":(0,Y.N)("commit-tick-result"),children:(0,r.jsx)("div",{children:"Commit tick result"})})})]}):(0,r.jsxs)(a.x,{flex:{direction:"row",gap:8},children:[(0,r.jsx)(u.zx,{onClick:l,children:"Close"}),(0,r.jsx)(c.u,{canShow:!et||w,content:"Launches all runs and commits tick result",placement:"top-end",children:(0,r.jsx)(u.zx,{icon:(0,r.jsx)(h.JO,{name:"check_filled"}),intent:"primary",disabled:!et||w,onClick:en,"data-testid":(0,Y.N)("launch-all"),children:(0,r.jsx)("div",{children:"Launch all & commit tick result"})})})]})}return v?(0,r.jsx)(a.x,{flex:{direction:"row",gap:8},children:(0,r.jsx)(u.zx,{onClick:l,children:"Cancel"})}):(0,r.jsxs)(a.x,{flex:{direction:"row",gap:8},children:[(0,r.jsx)(u.zx,{onClick:l,children:"Cancel"}),(0,r.jsx)(u.zx,{onClick:X,intent:"primary","data-testid":(0,Y.N)("continue"),children:"Continue"})]})},[w,z,N,v,l,G,et,en,X]),ei=(0,x.useMemo)(()=>{if(w)return(0,r.jsxs)(a.x,{flex:{direction:"row",gap:8,justifyContent:"center",alignItems:"center"},children:[(0,r.jsx)(T.$,{purpose:"body-text"}),(0,r.jsx)("div",{children:"Launching runs"})]});if(z||N){let e=z?.evaluationResult?.runRequests,s=e?.length||0,l=!N&&0===s,c=z?.evaluationResult?.dynamicPartitionsRequests;return(0,r.jsxs)(a.x,{flex:{direction:"column",gap:8},children:[(0,r.jsxs)(J,{children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(i.pm,{children:"Result"}),(0,r.jsx)(a.x,{flex:{grow:1,alignItems:"center"},children:(0,r.jsx)("div",{children:N?(0,r.jsx)(o.V,{intent:"danger",children:"Failed"}):s?(0,r.jsxs)(o.V,{intent:"success",children:[s," run requests"]}):(0,r.jsx)(o.V,{intent:"warning",children:"Skipped"})})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(i.pm,{children:"Used cursor value"}),(0,r.jsx)("pre",{children:f?.length?f:"None"})]})]}),(0,r.jsxs)(a.x,{children:[N?(0,r.jsx)("div",{children:(0,r.jsx)(M.T9,{error:N})}):null,l?(0,r.jsxs)(a.x,{flex:{direction:"column",gap:8},children:[(0,r.jsx)(i.pm,{style:{marginBottom:8},children:"Requested runs (0)"}),(0,r.jsx)("div",{children:(0,r.jsx)(W,{children:(0,r.jsx)(A.t,{icon:"missing",title:"No runs requested",description:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{children:"The sensor function was successfully evaluated but didn't return any run requests."}),(0,r.jsxs)("span",{children:[(0,r.jsx)("br",{}),"Skip reason:"," ",z?.evaluationResult?.skipReason?`"${z.evaluationResult.skipReason}"`:"No skip reason was output"]})]})})})})]}):null,s&&e?(0,r.jsxs)(a.x,{flex:{direction:"column",gap:8},children:[(0,r.jsxs)(i.pm,{children:["Requested runs (",s,")"]}),(0,r.jsx)(_.k,{runRequests:e,name:n,jobName:d,isJob:!0,repoAddress:t})]}):null,c?.length?(0,r.jsx)("div",{style:{marginTop:"24px"},children:(0,r.jsx)(P,{requests:c})}):null]}),(0,r.jsxs)(Q,{children:[(0,r.jsx)(i.pm,{children:"Computed cursor value"}),(0,r.jsx)("pre",{children:z?.evaluationResult?.cursor?.length?z?.evaluationResult.cursor:N?"Error":"None"})]})]})}return v?(0,r.jsxs)(a.x,{flex:{direction:"row",gap:8,justifyContent:"center",alignItems:"center"},children:[(0,r.jsx)(T.$,{purpose:"body-text"}),(0,r.jsx)("div",{children:"Evaluating sensor"})]}):(0,r.jsxs)(a.x,{flex:{direction:"column",gap:8},children:[(0,r.jsx)("div",{children:"Cursor value (optional)"}),(0,r.jsx)($.oi,{value:f,onChange:e=>y(e.target.value),"data-testid":(0,Y.N)("cursor-input"),placeholder:"Enter a cursor value"}),(0,r.jsx)("div",{children:"A cursor tracks where a sensor left off, allowing the sensor to efficiently process new changes or events without missing anything or duplicating work. The cursor is typically a string, and can be updated within the sensor's logic to reflect the latest state."}),(0,r.jsxs)("div",{children:[(0,r.jsx)("a",{href:"https://docs.dagster.io/concepts/partitions-schedules-sensors/sensors#idempotence-and-cursors",children:"Learn more"})," ","about cursors"]})]})},[z,N,v,w,n,d,t,f]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(b.a7,{children:(0,r.jsx)("div",{style:{minHeight:"300px"},children:ei})}),(0,r.jsx)(b.cN,{topBorder:!0,left:er,children:es})]})},H=(0,S.Ps)`
  mutation SensorDryRunMutation($selectorData: SensorSelector!, $cursor: String) {
    sensorDryRun(selectorData: $selectorData, cursor: $cursor) {
      ... on DryRunInstigationTick {
        timestamp
        evaluationResult {
          cursor
          runRequests {
            ...RunRequestFragment
          }
          skipReason
          error {
            ...PythonErrorFragment
          }
          dynamicPartitionsRequests {
            ...DynamicPartitionRequestFragment
          }
        }
      }
      ...PythonErrorFragment
    }
  }

  fragment DynamicPartitionRequestFragment on DynamicPartitionRequest {
    partitionKeys
    partitionsDefName
    type
  }

  ${z.s}
  ${F.B}
`,J=m.ZP.div.withConfig({componentId:"sc-75087ef-0"})(["display:grid;grid-template-columns:repeat(2,1fr);padding-bottom:12px;border-bottom:1px solid ",";","{padding-bottom:4px;display:block;}pre{margin:0;}button{margin-top:4px;}"],I.wL(),i.pm),Q=m.ZP.div.withConfig({componentId:"sc-75087ef-1"})(["display:grid;grid-template-columns:repeat(1,1fr);padding-bottom:12px;","{padding-bottom:4px;display:block;}pre{margin:0;}button{margin-top:4px;}"],i.pm),W=m.ZP.div.withConfig({componentId:"sc-75087ef-2"})(["","{margin:auto !important;width:unset !important;max-width:unset !important;}"],A.Y),X=e=>{let{cursor:t,name:n,repoAddress:s,jobName:i,sensorType:o}=e,[l,d]=(0,x.useState)(!1);return(0,r.jsxs)(a.x,{flex:{direction:"row",alignItems:"center",gap:8},children:[(0,r.jsx)(c.u,{canShow:o!==O.dEY.STANDARD,content:"Testing not available for this sensor type",placement:"top-end",children:(0,r.jsx)(u.zx,{disabled:o!==O.dEY.STANDARD,onClick:()=>d(!0),icon:(0,r.jsx)(h.JO,{name:"preview_tick"}),children:"Preview tick result"})}),(0,r.jsx)(Z,{isOpen:l,onClose:()=>d(!1),currentCursor:t,name:n,repoAddress:s,jobName:i})]})};var G=n(16336),ee=n(24427),et=n(79059),en=n(86269),er=n(58905);let es={showSeconds:!0,showTimezone:!1},ei=e=>(e||(e=30),e<60||e%60)?`~${e} sec`:3600===e?"~1 hour":e<3600||e%3600?`~${e/60} min`:86400===e?"~1 day":e<86400||e%86400?`~${e/3600} hours`:`~${e/86400} days`,eo=e=>{let{sensor:t,repoAddress:n,daemonHealth:m,refreshState:j,assetSelection:y}=e,{name:S,sensorState:{status:k,ticks:b},metadata:E}=t,{permissions:R,disabledReasons:I,loading:T}=(0,v.xz)(n.location),{canUpdateSensorCursor:A}=R,[$,_]=(0,x.useState)(!1),N={sensorName:t.name,repositoryName:n.name,repositoryLocationName:n.location},P=b.length?b[0]:null,z=t.sensorState.typeSpecificData&&"SensorData"===t.sensorState.typeSpecificData.__typename&&t.sensorState.typeSpecificData.lastCursor,q=k===O.ynu.RUNNING;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.m,{title:(0,r.jsxs)(i.X6,{style:{display:"flex",flexDirection:"row",gap:4},children:[(0,r.jsx)(p.rU,{to:"/automation",children:"Automation"}),(0,r.jsx)("span",{children:"/"}),S]}),icon:"sensors",tags:(0,r.jsxs)(o.V,{icon:"sensors",children:["Sensor in ",(0,r.jsx)(et.b,{repoAddress:n})]}),right:(0,r.jsxs)(a.x,{margin:{top:4},flex:{direction:"row",alignItems:"center",gap:8},children:[(0,r.jsx)(G.xi,{refreshState:j}),(0,r.jsx)(X,{cursor:z||"",name:t.name,repoAddress:n,jobName:t.targets?.[0]?.pipelineName||"",sensorType:t.sensorType})]})}),(0,r.jsx)(l.fJ,{children:(0,r.jsxs)("tbody",{children:[t.description?(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Description"}),(0,r.jsx)("td",{children:t.description})]}):null,(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Latest tick"}),(0,r.jsx)("td",{children:P?(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(a.x,{flex:{direction:"row",gap:8,alignItems:"center"},style:{marginTop:"-2px"},children:[(0,r.jsx)(en.v,{timestamp:P.timestamp,timeFormat:es}),(0,r.jsx)(er.a,{tick:P,tickResultType:"runs"})]})}):"Sensor has never run"})]}),t.nextTick&&m&&q&&(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Next tick"}),(0,r.jsx)("td",{children:(0,r.jsx)(en.v,{timestamp:t.nextTick.timestamp,timeFormat:es})})]}),t.targets&&t.targets.length||y?(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Target"}),(0,r.jsx)(ea,{children:(0,r.jsx)(ee.p,{targets:t.targets,repoAddress:n,assetSelection:y||null,automationType:t.sensorType})})]}):null,(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:(0,r.jsx)(a.x,{flex:{alignItems:"center"},style:{height:"32px"},children:"Running"})}),(0,r.jsx)("td",{children:(0,r.jsxs)(a.x,{flex:{direction:"row",gap:12,alignItems:"center"},style:{height:"32px"},children:[(0,r.jsx)(C.c,{repoAddress:n,sensor:t}),t.canReset&&(0,r.jsx)(w,{repoAddress:n,sensor:t})]})})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Frequency"}),(0,r.jsx)("td",{children:ei(t.minIntervalSeconds)})]}),E.assetKeys&&E.assetKeys.length?(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Monitored assets"}),(0,r.jsx)("td",{children:(0,r.jsx)(f,{metadata:E})})]}):null,t.sensorType!==O.dEY.AUTO_MATERIALIZE&&t.sensorType!==O.dEY.AUTOMATION?(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:(0,r.jsx)(a.x,{flex:{alignItems:"center"},style:{height:"32px"},children:"Cursor"})}),(0,r.jsxs)("td",{children:[(0,r.jsxs)(a.x,{flex:{direction:"row",gap:12,alignItems:"center"},children:[(0,r.jsx)("span",{style:{fontFamily:d.b.monospace,fontSize:"14px"},children:z||"None"}),(0,r.jsx)(c.u,{canShow:!A,content:I.canUpdateSensorCursor,children:(0,r.jsx)(u.zx,{icon:(0,r.jsx)(h.JO,{name:"edit"}),disabled:!A||T,onClick:()=>_(!0),children:"Edit"})})]}),(0,r.jsx)(g.x,{isOpen:$,sensorSelector:N,cursor:z||"",onClose:()=>_(!1)})]})]}):null]})})]})},ea=m.ZP.td.withConfig({componentId:"sc-21e6255b-0"})(["button{line-height:20px;}"])},68856:function(e,t,n){n.d(t,{Z:function(){return F},A:function(){return q}});var r=n(52322),s=n(51484),i=n(14934),o=n(79106),a=n(39013),l=n(37483),d=n(49308),c=n(2784),u=n(7267),h=n(50494),x=n(20958),p=n(581);let m=(0,x.Ps)`
  fragment SensorFragment on Sensor {
    id
    name
    description
    minIntervalSeconds
    sensorType
    nextTick {
      timestamp
    }
    defaultStatus
    canReset
    sensorState {
      id
      ...InstigationStateFragment
    }
    targets {
      pipelineName
      solidSelection
      mode
    }
    metadata {
      assetKeys {
        path
      }
    }
  }

  ${p.ai}
`;var g=n(16629);let j=e=>{let{sensorDaemonStatus:t,assetDaemonStatus:n,...s}=e,o=t&&!1===t.healthy&&t.required,a=n&&!1==!n.healthy&&n.required;return a||o?(0,r.jsx)(i.x,{...s,children:(0,r.jsx)(g.b,{intent:"warning",title:o?a?"The sensor and asset daemons are not running":"The sensor daemon is not running":"The asset daemon is not running",description:(0,r.jsxs)("div",{children:["See the"," ",(0,r.jsx)("a",{href:"https://docs.dagster.io/deployment/dagster-daemon",target:"_blank",rel:"noreferrer",children:"dagster-daemon documentation"})," ","for more information on how to deploy the dagster-daemon process."]})})}):null};var f=n(80122),y=n(16336),S=n(71902),v=n(30916),k=n(43984),w=n(15332),C=n(22563);let b=e=>{let{sensor:t,repoAddress:n,highlightedIds:s,tabs:i}=e,{queryResult:o,paginationProps:a}=(0,w.l)({query:E,variables:{filter:{tags:[{key:k.H.SensorName,value:t.name},{key:k.H.RepositoryLabelTag,value:(0,C.Wg)(n)}]}},nextCursorForResult:e=>{if("Runs"===e.pipelineRunsOrError.__typename)return e.pipelineRunsOrError.results[20-1]?.id},getResultArray:e=>e?.pipelineRunsOrError.__typename!=="Runs"?[]:e.pipelineRunsOrError.results,pageSize:20});(0,y.C4)(o,a.hasPrevCursor?36e5:1e4);let l=o.data;if(l&&l?.pipelineRunsOrError.__typename==="Runs"||(l=o.previousData),!l||l?.pipelineRunsOrError.__typename!=="Runs")return null;let d=l.pipelineRunsOrError.results;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(S.A,{actionBarComponents:i,runs:d,highlightedIds:s,hideCreatedBy:!0}),(0,r.jsx)("div",{style:{paddingBottom:"16px"},children:(0,r.jsx)(f.pI,{...a})})]})},E=(0,x.Ps)`
  query PreviousRunsForSensorQuery($filter: RunsFilter, $cursor: String, $limit: Int) {
    pipelineRunsOrError(filter: $filter, limit: $limit, cursor: $cursor) {
      ... on Runs {
        results {
          id
          ... on PipelineRun {
            ...RunTableRunFragment
          }
        }
      }
    }
  }

  ${v.Z}
`;var R=n(78491),I=n(99590),T=n(69737),A=n(48502),$=n(88257),_=n(20171),N=n(4378),O=n(40782),P=n(9790),z=n(20718);let q=e=>{let{repoAddress:t}=e;(0,T.Px)();let{sensorName:n}=(0,u.UO)();(0,_.j)(`Sensor: ${n}`);let p={...(0,z.$)(t),sensorName:n},[m,g]=(0,c.useState)(void 0),[f,S]=(0,c.useState)(void 0),v=(0,c.useMemo)(()=>f||m?{afterTimestamp:f?.[0],beforeTimestamp:f?.[1],statuses:m}:{},[m,f]),[k,w]=(0,N.q)((0,c.useMemo)(()=>({queryKey:"view",decode:e=>{let{view:t}=e;return"runs"===t?"runs":"evaluations"},encode:e=>({view:e,cursor:void 0,statuses:void 0})}),[])),C=(0,x.aM)(D,{variables:{sensorSelector:p},notifyOnNetworkStatusChange:!0}),E=(0,x.aM)(F,{variables:{sensorSelector:p},notifyOnNetworkStatusChange:!0}),R=(0,y.C4)(C,y.dT),A=(0,y.C4)(E,y.dT),O=(0,y.V5)(R,A),{data:q,loading:M}=C,L=(0,r.jsx)(s.h,{activeItems:new Set([k]),buttons:[{id:"evaluations",label:"Evaluations"},{id:"runs",label:"Runs"}],onClick:e=>{w(e)}});if(!q&&M)return(0,r.jsxs)(i.x,{margin:{top:32},flex:{direction:"row",alignItems:"center",justifyContent:"center",gap:16},children:[(0,r.jsx)(o.$,{purpose:"body-text"}),(0,r.jsx)("div",{style:{color:a.$()},children:"Loading sensor…"})]});if(!q||"SensorNotFoundError"===q.sensorOrError.__typename)return(0,r.jsx)(i.x,{padding:{vertical:32},children:(0,r.jsx)(l.t,{icon:"error",title:`Could not find sensor \`${n}\` in definitions for \`${t.name}\``})});let{sensorOrError:U}=q;if("PythonError"===U.__typename)return(0,r.jsx)(I.T9,{error:U});if("UnauthorizedError"===U.__typename)return(0,r.jsx)(u.l_,{to:"/overview/sensors"});let{instance:K}=q,Y=E.data?.sensorOrError.__typename==="Sensor"?E.data.sensorOrError.assetSelection:null,B=U.sensorType===$.dEY.AUTO_MATERIALIZE||U.sensorType===$.dEY.AUTOMATION,Z=K.daemonHealth.sensorDaemonStatus,V=B?"materializations":"runs";return(0,r.jsxs)(d.T,{children:[(0,r.jsx)(h.e,{repoAddress:t,sensor:U,daemonHealth:Z.healthy,refreshState:O,assetSelection:Y||null}),(0,r.jsx)(j,{sensorDaemonStatus:Z,padding:{vertical:16,horizontal:24}}),(0,r.jsx)(P.C,{tickResultType:V,repoAddress:t,name:U.name,...v}),(0,r.jsx)(i.x,{margin:{top:32},border:"top",children:"evaluations"===k?(0,r.jsx)(P.H,{tabs:L,tickResultType:V,repoAddress:t,name:U.name,setParentStatuses:g,setTimerange:S}):(0,r.jsx)(b,{repoAddress:t,sensor:U,tabs:L})})]})},D=(0,x.Ps)`
  query SensorRootQuery($sensorSelector: SensorSelector!) {
    sensorOrError(sensorSelector: $sensorSelector) {
      ... on Sensor {
        id
        ...SensorFragment
      }
      ...PythonErrorFragment
    }
    instance {
      id
      daemonHealth {
        id
        sensorDaemonStatus: daemonStatus(daemonType: "SENSOR") {
          id
          healthy
          required
        }
        ampDaemonStatus: daemonStatus(daemonType: "ASSET") {
          id
          healthy
          required
        }
      }
      ...InstanceHealthFragment
    }
  }

  ${m}
  ${R.B}
  ${O.O}
`,F=(0,x.Ps)`
  query SensorAssetSelectionQuery($sensorSelector: SensorSelector!) {
    sensorOrError(sensorSelector: $sensorSelector) {
      ... on Sensor {
        id
        assetSelection {
          ...AutomationAssetSelectionFragment
        }
      }
      ...PythonErrorFragment
    }
  }

  ${A.z}
  ${R.B}
`},49035:function(e,t,n){n.d(t,{k:function(){return j}});var r=n(52322),s=n(14934),i=n(1747),o=n(39013),a=n(35002),l=n(38491),d=n(36853),c=n(2784),u=n(74824),h=n(50309),x=n(85227),p=n(33847),m=n(77851),g=n(92199);let j=e=>{let{runRequests:t,isJob:n,repoAddress:a,mode:l,jobName:d}=e,j=(0,g.Ux)(a),[y,S]=(0,c.useState)(null),[v,k]=(0,c.useState)(null),w=(0,x.m)(),C=async()=>{w(y?.runConfigYaml||""),await (0,h.B7)({intent:"success",icon:"copy_to_clipboard_done",message:"Copied!"})},b=(0,r.jsxs)("tbody",{"data-testid":(0,m.N)("table-body"),children:[t.map((e,t)=>(0,r.jsxs)("tr",{"data-testid":(0,m.N)(e.runKey||""),children:[(0,r.jsx)("td",{style:{verticalAlign:"middle"},children:(0,r.jsx)(s.x,{flex:{alignItems:"center",gap:8},children:(0,r.jsx)(p.h,{pipelineName:e.jobName??d,pipelineHrefContext:a,isJob:!!j&&n,showIcon:!0,size:"small"})})}),(0,r.jsx)("td",{style:{width:"7.5%",verticalAlign:"middle",textAlign:"center"},children:(0,r.jsx)(f,{request:e,onClick:()=>{S(e),k("config")}})})]},t)),y&&(0,r.jsx)(u.U,{isOpen:"config"===v,onClose:()=>k(null),copyConfig:()=>C(),mode:l||null,runConfigYaml:y.runConfigYaml,tags:y.tags,isJob:n,jobName:d,request:y,repoAddress:a})]});return(0,r.jsx)("div",{children:(0,r.jsxs)(i.i,{style:{borderRight:`1px solid ${o.wL()}`,tableLayout:"fixed"},children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"Target"}),(0,r.jsx)("th",{style:{width:"7.5%"},children:"Actions"})]})}),b]})})};function f(e){let{request:t,onClick:n}=e;return(0,r.jsx)(a.u,{content:"Preview run config and tags",placement:"left-start",children:(0,r.jsx)(l.zx,{icon:(0,r.jsx)(d.JO,{name:"data_object"}),onClick:n,"data-testid":(0,m.N)(`preview-${t.runKey||""}`)})})}},76562:function(e,t,n){n.d(t,{s:function(){return s}});var r=n(20958);let s=(0,r.Ps)`
  fragment RunRequestFragment on RunRequest {
    runConfigYaml
    tags {
      key
      value
    }
    runKey
    jobName
    assetSelection {
      path
    }
  }
`},57397:function(e,t,n){n.d(t,{l:function(){return p}});var r=n(52322),s=n(92506),i=n(14934),o=n(39013),a=n(38491),l=n(45774),d=n(37483),c=n(36853),u=n(18978),h=n(20958),x=n(86269);let p=e=>{let{tickId:t,timestamp:n,instigationSelector:l,isOpen:d,onClose:c}=e;return(0,r.jsxs)(s.Vq,{isOpen:d,onClose:c,style:{width:"70vw",maxWidth:"1200px",minWidth:"800px"},title:(0,r.jsx)("span",{children:n?(0,r.jsxs)("span",{children:[(0,r.jsxs)("span",{children:["Logs for ",l.name,": "]}),(0,r.jsx)(x.v,{timestamp:n,timeFormat:{showSeconds:!0}})]}):(0,r.jsxs)("span",{children:["Logs for ",l.name]})}),children:[t?(0,r.jsx)(m,{instigationSelector:l,tickId:t}):null,(0,r.jsx)(i.x,{background:o.v8(),style:{zIndex:3,position:"relative"},children:(0,r.jsx)(s.cN,{topBorder:!0,children:(0,r.jsx)(a.zx,{onClick:c,children:"Done"})})})]})},m=e=>{let{instigationSelector:t,tickId:n}=e,{data:s,loading:o}=(0,h.aM)(g,{variables:{instigationSelector:t,tickId:n},notifyOnNetworkStatusChange:!0}),x=s?.instigationStateOrError.__typename==="InstigationState"&&s?.instigationStateOrError.tick?s?.instigationStateOrError.tick.logEvents.events:void 0;if(o)return(0,r.jsx)(i.x,{style:{height:500},flex:{justifyContent:"center",alignItems:"center"},children:(0,r.jsx)(l.f,{label:"Loading logs…"})});if(x&&x.length)return(0,r.jsx)(i.x,{style:{height:500},flex:{direction:"column"},children:(0,r.jsx)(u.g,{events:x})});let p=s?.instigationStateOrError.__typename==="InstigationState"?s?.instigationStateOrError.tick.status:void 0,m=s?.instigationStateOrError.__typename==="InstigationState"?s?.instigationStateOrError.instigationType:void 0,j="SENSOR"===m?"https://docs.dagster.io/concepts/partitions-schedules-sensors/sensors#logging-in-sensors":"SCHEDULE"===m?"https://docs.dagster.io/concepts/partitions-schedules-sensors/schedules#logging-in-schedules":void 0;return(0,r.jsx)(i.x,{style:{height:500},flex:{justifyContent:"center",alignItems:"center"},padding:{vertical:48},children:(0,r.jsx)(d.t,{icon:"no-results",title:"No logs to display",description:(0,r.jsxs)(i.x,{flex:{direction:"column",gap:12},children:[(0,r.jsx)("div",{children:"Your evaluation did not emit any logs. To learn how to emit logs in your evaluation, visit the documentation for more information."}),"FAILURE"===p&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{children:"For failed evaluations, logs will only be displayed if your Dagster and Dagster Cloud agent versions 1.5.14 or higher."}),(0,r.jsx)("div",{children:"Upgrade your Dagster versions to view logs for failed evaluations."})]})]}),action:j&&(0,r.jsx)(a.fr,{href:j,rightIcon:(0,r.jsx)(c.JO,{name:"open_in_new"}),children:"View documentation"})})})},g=(0,h.Ps)`
  query TickLogEventsQuery($instigationSelector: InstigationSelector!, $tickId: ID!) {
    instigationStateOrError(instigationSelector: $instigationSelector) {
      ... on InstigationState {
        id
        instigationType
        tick(tickId: $tickId) {
          id
          status
          timestamp
          logEvents {
            events {
              ...InstigationEventLog
            }
          }
        }
      }
    }
  }
  ${u.n}
`},58905:function(e,t,n){n.d(t,{a:function(){return g}});var r=n(52322),s=n(43212),i=n(75561),o=n(39013),a=n(35002),l=n(14934),d=n(89891),c=n(40191),u=n(92506),h=n(38491),x=n(2784),p=n(99590),m=n(88257);let g=e=>{let{tick:t,tickResultType:n,isStuckStarted:g}=e,[j,f]=(0,x.useState)(!1),y=(0,x.useMemo)(()=>{let e="materializations"===n?"materialization":"run";switch(t.status){case m.izS.STARTED:return(0,r.jsx)(s.V,{intent:"primary",icon:g?void 0:"spinner",children:g?"In progress":"Evaluating"});case m.izS.SKIPPED:let u=(0,r.jsx)(i.m,{fillColor:o.fk(),label:"materializations"===n?"0 materializations requested":"0 runs requested"});if("runKeys"in t&&t.runKeys.length){let e=`${t.runKeys.length} runs requested, but skipped because the runs already exist for the requested keys.`;return(0,r.jsx)(a.u,{position:"right",content:e,children:u})}if("skipReason"in t&&t.skipReason)return(0,r.jsx)(a.u,{position:"right",content:t.skipReason,targetTagName:"div",children:u});return u;case m.izS.FAILURE:return(0,r.jsxs)(l.x,{flex:{direction:"row",alignItems:"center",gap:6},children:[(0,r.jsx)(s.V,{intent:"danger",children:"Failure"}),t.error?(0,r.jsx)(d.Z,{onClick:()=>{f(!0)},children:"View"}):null]});case m.izS.SUCCESS:let h="materializations"===n?t.requestedAssetMaterializationCount:t.runIds.length,x=(0,r.jsxs)(s.V,{intent:"success",children:[h," ",e,(0,c.I)(h,"","s")," requested"]});if("runKeys"in t&&t.runKeys.length>t.runIds.length){let e=`${t.runKeys.length} runs requested, but ${t.runKeys.length-t.runIds.length} skipped because the runs already exist for those requested keys.`;return(0,r.jsx)(a.u,{position:"right",content:e,children:x})}return x}},[g,t,n]);return(0,r.jsxs)(r.Fragment,{children:[y,t.error?(0,r.jsxs)(u.Vq,{isOpen:j,title:"Error",style:{width:"80vw"},children:[(0,r.jsx)(u.a7,{children:(0,r.jsx)(p.T9,{error:t.error})}),(0,r.jsx)(u.cN,{topBorder:!0,children:(0,r.jsx)(h.zx,{intent:"primary",onClick:()=>{f(!1)},children:"Close"})})]}):null]})}},58252:function(e,t,n){n.d(t,{G:function(){return d},Q:function(){return l}});var r=n(45984),s=n(8068),i=n(68670);let o="The YAML you provided couldn't be parsed. Please fix the syntax errors and try again.",a=e=>{let{key:t,value:n}=e;return{key:t,value:n}},l=(e,t)=>{if(!e)return[];let n=[];return e?.evaluationResult?.runRequests?.forEach(e=>{let l=i.s(e.runConfigYaml);try{r.Qc(l)}catch{s._K({title:"Invalid YAML",body:o});return}let{repositoryLocationName:d,repositoryName:c}=t,u={runConfigData:l,selector:{jobName:e.jobName,repositoryLocationName:d,repositoryName:c,assetSelection:[],assetCheckSelection:[],solidSelection:void 0},mode:"default",executionMetadata:{tags:[...e.tags.map(a)]}};n.push(u)}),n},d=(e,t)=>{if(!e)return[];let n=[];return e?.evaluationResult?.runRequests?.forEach(e=>{let l=i.s(e.runConfigYaml);try{r.Qc(l)}catch{s._K({title:"Invalid YAML",body:o});return}let{repositoryLocationName:d,repositoryName:c}=t,u={runConfigData:l,selector:{jobName:e.jobName,repositoryLocationName:d,repositoryName:c,assetSelection:[],assetCheckSelection:[],solidSelection:void 0},mode:"default",executionMetadata:{tags:[...e.tags.map(a)]}};n.push(u)}),n}}}]);
//# sourceMappingURL=1445.93ba1f3ff3ef5af8.js.map